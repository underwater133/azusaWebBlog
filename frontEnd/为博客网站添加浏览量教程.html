<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为博客网站添加浏览量教程 | Azusa的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/azusaWebBlog/YeaMiko.png">
    <script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e072087a21b1865aa670ebe1fe0b6bcb";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script>
    <meta name="description" content="Welcome to my blog">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/azusaWebBlog/assets/css/0.styles.9b279e47.css" as="style"><link rel="preload" href="/azusaWebBlog/assets/js/app.f692878f.js" as="script"><link rel="preload" href="/azusaWebBlog/assets/js/3.4b10ef19.js" as="script"><link rel="preload" href="/azusaWebBlog/assets/js/1.be302be5.js" as="script"><link rel="preload" href="/azusaWebBlog/assets/js/7.6d3812aa.js" as="script"><link rel="prefetch" href="/azusaWebBlog/assets/js/10.436d4495.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/11.c7257ba9.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/12.71fb7737.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/13.92d9f13f.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/14.56204c19.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/15.19726a0c.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/16.a6ed66f9.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/17.d7f8004b.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/18.acfaa908.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/19.0e479fb2.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/20.4e7a1ffc.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/21.4dcdbb6c.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/22.280fa3a2.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/23.ef4da725.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/24.5af058c2.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/25.b986ae02.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/26.ce8c50f6.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/27.9b347b50.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/28.2d7d66d5.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/29.07dea86c.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/30.f2222f67.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/31.fa4d9498.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/32.f5fa880c.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/33.fef287bb.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/34.96aa227f.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/35.b9e777af.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/36.06f9d433.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/37.6b6f8dac.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/38.223b3ac0.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/39.22a22b47.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/4.591b6133.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/40.4d802a55.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/41.852fe562.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/42.47d8ec66.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/43.f5b7d60b.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/44.261ee0c5.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/45.b192a6b8.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/46.2cdbea98.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/47.59072e84.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/48.d0e732fe.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/49.c72fe434.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/5.0e7b4fcd.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/50.5fc3f6a5.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/51.3a96a046.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/52.28b0955a.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/53.c16faeb6.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/54.d8dc153a.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/55.b2e4d56b.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/56.dc1666e4.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/57.2754fc45.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/58.f7fca29f.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/59.1e8fc344.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/6.fed335f9.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/60.26bbf7d9.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/61.a8b4157b.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/62.86d5937b.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/63.dd496994.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/64.6fbef4e3.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/65.b61c99e8.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/66.625730eb.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/67.1517614c.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/68.f8ecd582.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/69.1a258212.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/70.d822b4af.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/71.929ae8ef.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/72.bee38bec.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/73.07cf72f4.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/74.16c52c72.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/75.336b6304.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/76.58067f43.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/77.f61c7b17.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/8.1ca71720.js"><link rel="prefetch" href="/azusaWebBlog/assets/js/9.7c5ec441.js">
    <link rel="stylesheet" href="/azusaWebBlog/assets/css/0.styles.9b279e47.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Azusa的博客</h3> <p class="description" data-v-59e6cb88>Welcome to my blog</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Azusa</span>
          
        <span data-v-59e6cb88>2023 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/azusaWebBlog/" class="home-link router-link-active"><img src="/azusaWebBlog/YeaMiko.png" alt="Azusa的博客" class="logo"> <span class="site-name">Azusa的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/azusaWebBlog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/前端随笔/" class="nav-link"><i class="undefined"></i>
  前端随笔
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/React/" class="nav-link"><i class="undefined"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/力扣/" class="nav-link"><i class="undefined"></i>
  力扣
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/其他/" class="nav-link"><i class="undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/azusaWebBlog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/azusaWebBlog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/underwater133" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_45732455" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/11340406" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  Bilibili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/azusaWebBlog/Doge.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    Azusa
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>67</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>49</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/azusaWebBlog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/前端随笔/" class="nav-link"><i class="undefined"></i>
  前端随笔
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/React/" class="nav-link"><i class="undefined"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/力扣/" class="nav-link"><i class="undefined"></i>
  力扣
</a></li><li class="dropdown-item"><!----> <a href="/azusaWebBlog/categories/其他/" class="nav-link"><i class="undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/azusaWebBlog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/azusaWebBlog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/underwater133" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_45732455" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/11340406" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  Bilibili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>为博客网站添加浏览量教程</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>Azusa</span>
          
        <span data-v-59e6cb88>2023 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">为博客网站添加浏览量教程</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>Azusa</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/4/4</span></i> <i class="iconfont reco-eye" data-v-8a445198><span id="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>前端</span><span class="tag-item" data-v-8a445198>VuePress</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="开通百度统计"><a href="#开通百度统计" class="header-anchor">#</a> 开通百度统计</h2> <p>我是使用<a href="https://tongji.baidu.com/web/welcome/login" target="_blank" rel="noopener noreferrer">百度统计<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来统计浏览量的，首先要注册账号，如果有了也可以直接登陆。我用的账号的普通的百度账号，而不是营销账号。</p> <p>登陆之后就能看到如下界面，并且点击使用设置：
<img src="/azusaWebBlog/assets/img/1680601833911.059d484d.jpg"></p> <p>点击之后进入设置页面，可以新建网站：
<img src="/azusaWebBlog/assets/img/1680602138623.bc90ffd5.jpg"></p> <p>然后填入信息：
<img src="/azusaWebBlog/assets/img/1680602321074.66f8f078.jpg"></p> <p>确定之后就能看到百度给的脚本了：
<img src="/azusaWebBlog/assets/img/1680602397106.283aaec7.jpg"></p> <h2 id="配置代码"><a href="#配置代码" class="header-anchor">#</a> 配置代码</h2> <p>按照他的教程，把脚本添加到我们的所有页面里面。由于使用vuepress构建后的是静态页面，切换页面也不会触发请求，所以我们需要在进去网站的时候就把这段脚本加上，而且在切换页面的时候也需要触发统计。</p> <p>现在先把代码加到我们的页面中：
<img src="/azusaWebBlog/assets/img/1680603226237.071c8ef1.jpg"></p> <p>接下来添加 config 同级文件 enhanceApp.js，添加如下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 路由切换事件处理</span>
  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//触发百度的pv统计</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> _hmt <span class="token operator">!=</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _hmt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;_trackPageview&quot;</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>fullPath<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>然后等一段时间，大概20分钟，如果配置正确的话就能看到数据了！
<img src="/azusaWebBlog/assets/img/1680605911884.61dcca93.jpg"></p> <p>那么接下来就是把数据引入到我们的网站里面了。我们可以阅读<a href="https://tongji.baidu.com/api/manual/Chapter2/openapi.html" target="_blank" rel="noopener noreferrer">百度统计的文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来开通数据api，但是开通需要前一天网站的阅读量超过100才可以，所以目前我还开通不了，自己随便点点几下就好了，只能明天再继续了。</p> <h2 id="数据导出"><a href="#数据导出" class="header-anchor">#</a> 数据导出</h2> <p>-- one day later --
今天可以开通数据导出服务了，开通后我们会获取到API Key与Secret Key，如下图：
<img src="/azusaWebBlog/assets/img/1680662559892.88e5ef8d.png">
注意图中的统计工具和文档，后面调试的时候需要用到。</p> <p>然后我们点击 此文档 继续后面的操作。</p> <p>首先利用 api key 去获取 code：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> http://openapi.baidu.com/oauth/2.0/authorize?response_type=code&amp;client_id={CLIENT_ID}&amp;redirect_uri=oob&amp;scope=basic&amp;display=popup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中的CLIENT_ID就是api key。</p> <p>获取到code之后，通过code、CLIENT_ID和Secret Key去获取 ACCESS_TOKEN，这个就是我们要调用接口的凭证了：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://openapi.baidu.com/oauth/2.0/token?grant_type=authorization_code&amp;code={CODE}&amp;client_id={CLIENT_ID}&amp;client_secret={CLIENT_SECRET}&amp;redirect_uri=oob
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>返回结果如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;expires_in&quot;</span><span class="token operator">:</span> <span class="token number">2592000</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;refresh_token&quot;</span><span class="token operator">:</span><span class="token string">&quot;2.385d55f8615fdfd9edb7c4b5ebdc3e39.604800.1293440400-2346678-124328&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;access_token&quot;</span><span class="token operator">:</span><span class="token string">&quot;1.a6b7dbd428f731035f771b8d15063f61.86400.1292922000-2346678-124328&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;session_secret&quot;</span><span class="token operator">:</span><span class="token string">&quot;ANXxSNjwQDugf8615OnqeikRMu2bKaXCdlLxn&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;session_key&quot;</span><span class="token operator">:</span><span class="token string">&quot; 248APxvxjCZ0VEC43EYrvxqaK4oZExMB&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;scope&quot;</span><span class="token operator">:</span><span class="token string">&quot;basic&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>此外还有一个参数需要获取，那就是site_id，也就是我们网站的id，需要调用查询自己的网站列表api去获取：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>https://openapi.baidu.com/rest/2.0/tongji/config/getSiteList?access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.1292922000-2346678-124328
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>把其中的 access_token 换成你自己的。</p> <p>返回的结果如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;site_id&quot;</span><span class="token operator">:</span> <span class="token number">18957957</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;domain&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-04-04 17:58:49&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;sub_dir_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>记住这个site_id。</p> <p>然后我们回到刚开通数据导出服务的那个页面，点击api调试工具，来到调试界面，选择百度账号之后，填入自己的 access_token，选择获取报告数据，网站概况(趋势数据)，最后再填入参数就OK啦。</p> <p>这里我们简单试一下，查询一下浏览量：
<img src="/azusaWebBlog/assets/img/1680663515804.2334509f.jpg">
点击提交之后，就会自动帮我们生成请求链接和响应结果：
<img src="/azusaWebBlog/assets/img/1680663641682.09384988.jpg">
我们就可以拿着这个链接放到我们的博客里啦。</p> <p>然后我只能查出总的访问量，不能看到每个子页面的访问量，可能是我设置站点的时候有些地方出错了。但经过查阅用户手册，发现可以通过调用 受访页面 的接口来获取每个页面的访问量。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>https://openapi.baidu.com/rest/2.0/tongji/report/getData?access_token=xxxxxxxx&amp;site_id=xxxx&amp;method=visit/toppage/a&amp;start_date=20190101&amp;end_date=20190105&amp;metrics=pv_count,visitor_count
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其实就是 method 不一样。</p> <p>那么我们可以在之前的 enhanceApp.js 中请求访问量，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getPV <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../util/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 路由切换事件处理</span>
  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//触发百度的pv统计</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> _hmt <span class="token operator">!=</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _hmt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;_trackPageview&quot;</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>fullPath<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">getPV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>error_code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Access token 过期了</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> items <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> page <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> vis <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">let</span> pv <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token comment">// 主页统计全部</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              page<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// 只统计该域名下的，因为开发的时候访问也会被计算这里分开统计</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  pv <span class="token operator">+=</span> vis<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token keyword">const</span> pathUrl <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> to<span class="token punctuation">.</span>path
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> page<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>page<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">==</span> pathUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  pv <span class="token operator">=</span> vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                  <span class="token keyword">break</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="展示浏览量"><a href="#展示浏览量" class="header-anchor">#</a> 展示浏览量</h2> <p>到这里已经只差最后一步了，那就是把浏览量展示到我们的主页还有每篇博客上面。因为我使用的主题是vuepress-theme-reco，所以需要在node_modules中找到主题的源代码，自己修改想要显示浏览量的位置。</p> <p>例如在首页中，我希望把浏览量设置在底部备案的位置：
<img src="data:image/jpeg;base64,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"></p> <p>所以我们需要找到Footer组件，经过我的一番寻找，发现他在node_modules/vuepress-theme-reco/components下，我们直接把备案的那串代码注释掉，添加如下代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- template --&gt;
&lt;span&gt;
  &lt;reco-icon icon=&quot;reco-eye&quot; /&gt;
  &lt;a&gt;
    &lt;span&gt;{{ pv }}&lt;/span&gt;
  &lt;/a&gt;
&lt;/span&gt;

&lt;!-- js --&gt;
setup() {
  ...
  const pv = window.pv
  return { ..., pv}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>然后重新启动项目，就能看到效果了：
<img src="data:image/jpeg;base64,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"></p> <p>接下来就是在博客文章的页面加上了，继续翻源码，还是在刚刚的component目录下，找到PageInfo，进去刚刚相同的操作就好了。但是发现他原本就有这一段代码：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reco-icon</span>
  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showAccessNumber === true<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reco-eye<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AccessNumber</span> <span class="token attr-name">:idVal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageInfo.path<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:numStyle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>numStyle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>reco-icon</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>也就是说官方是支持阅读量的，但通过查阅官方文档后，他们的这么解释的：</p> <blockquote><p>浏览量 仅在使用 Valine 时显示；</p> <p>因为 浏览量 需要在页面加载时去调用相关接口，所以列表页的所有数据会一起加载下来，如果文章数量很多会影响加载速度，所以在 1.2.0 之后去掉文章列表的浏览量。</p></blockquote> <p>那我们也不用管了，直接使用百度的统计API就行。</p> <p>修改之后可以看到如下效果：
<img src="/azusaWebBlog/assets/img/1680677288318.915de242.jpg"></p> <h2 id="调试"><a href="#调试" class="header-anchor">#</a> 调试</h2> <p>本以为大功告成了，没想到回到首页一看，寄，首页中文章列表也是用的这个组件，所以浏览量变成了首页的：
<img src="/azusaWebBlog/assets/img/1680677370206.1cd4125c.jpg"></p> <p>那么现在的问题是在首页的时候需要获取到各个页面的浏览量，这个好办，我们把之前pv变量设置成一个对象，把页面的url作为key，然后值为浏览量。稍微修改一下 enhanceApp.js 中相关的部分：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getPV <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../util/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 路由切换事件处理</span>
  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//触发百度的pv统计</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> _hmt <span class="token operator">!=</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _hmt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;_trackPageview&quot;</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>fullPath<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">getPV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> pv <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 修改为一个对象</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>error_code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Access token 过期了</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> items <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> page <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> vis <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> n <span class="token operator">=</span> page<span class="token punctuation">.</span>length
            <span class="token comment">// 首页把全部页面的浏览量添加进去</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>
              page<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  total <span class="token operator">+=</span> vis<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
              pv<span class="token punctuation">[</span><span class="token string">'home'</span><span class="token punctuation">]</span> <span class="token operator">=</span> total
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                pv<span class="token punctuation">[</span>page<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token keyword">const</span> pathUrl <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> to<span class="token punctuation">.</span>path
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>page<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">==</span> pathUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  pv<span class="token punctuation">[</span>pathUrl<span class="token punctuation">]</span> <span class="token operator">=</span> vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 不是首页只添加自己的页面</span>
                  <span class="token keyword">break</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          window<span class="token punctuation">.</span>pv <span class="token operator">=</span> pv
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>然后对应修改 Footer 组件和 PageInfo 组件的 pv 取值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Footer.vue</span>
<span class="token keyword">const</span> pv <span class="token operator">=</span> window<span class="token punctuation">.</span>pv<span class="token punctuation">[</span><span class="token string">'home'</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>

<span class="token comment">// PageInfo.vue</span>
<span class="token keyword">const</span> pv <span class="token operator">=</span> window<span class="token punctuation">.</span>pv<span class="token punctuation">[</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> props<span class="token punctuation">.</span>pageInfo<span class="token punctuation">.</span>path<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span>

<span class="token comment">// 原本我还在想，首页中是如何知道每个PageInfo组件是属于哪一篇文章的呢，因为官方原本也有实现这个功能。结果打印props一看，好家伙，信息都在里面。</span>
<span class="token comment">// 所以可以拿到这个 props.pageInfo.path，匹配到对应的页面就可以拿到浏览量了。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>本以为真的没问题了，没想到一打包，报了一堆错误QAQ，发现是window is not defined。又是经过了一阵查找，发现没什么特别好的解决方法。只能综合网上的方法自己想一个了。</p> <p>我们就是要个全局变量可以存储 pv 这个对象，那么可以把他挂在 Vue 实例上。但又有一个问题，我们在服务端获取不了当前的页面路径，使用 window.location.domain 也会报错。最后发现 enhanceApp.js 中可以接收一个变量 isServer，判断当前是否是服务端。那么只要不是在服务端，我们就能使用 window 了。</p> <p>最终修改代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// enhanceApp.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getPV <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../util/api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router<span class="token punctuation">,</span> isServer <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 路由切换事件处理</span>
  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isServer <span class="token operator">=</span> isServer
    <span class="token comment">//触发百度的pv统计</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> _hmt <span class="token operator">!=</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里稍微修改了一下，因为被编译成html了，hash值改变就不再重复添加了</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">||</span> to<span class="token punctuation">.</span>path <span class="token operator">!=</span> from<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _hmt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;_trackPageview&quot;</span><span class="token punctuation">,</span> to<span class="token punctuation">.</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">getPV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> pv <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>error_code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Access token 过期了</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> items <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> page <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> vis <span class="token operator">=</span> items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> n <span class="token operator">=</span> page<span class="token punctuation">.</span>length
            <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span>
              page<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  total <span class="token operator">+=</span> vis<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
              pv<span class="token punctuation">[</span><span class="token string">'home'</span><span class="token punctuation">]</span> <span class="token operator">=</span> total
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                pv<span class="token punctuation">[</span>page<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token keyword">const</span> pathUrl <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> to<span class="token punctuation">.</span>path
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>page<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">==</span> pathUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  pv<span class="token punctuation">[</span>pathUrl<span class="token punctuation">]</span> <span class="token operator">=</span> vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                  <span class="token keyword">break</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>pv <span class="token operator">=</span> pv
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// PageInfo.vue</span>
<span class="token keyword">let</span> pv <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isServer <span class="token operator">&amp;&amp;</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pv <span class="token operator">=</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>pv<span class="token punctuation">[</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> props<span class="token punctuation">.</span>pageInfo<span class="token punctuation">.</span>path<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// Footer.vue</span>
<span class="token keyword">let</span> pv <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isServer <span class="token operator">&amp;&amp;</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>pv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pv <span class="token operator">=</span> <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>pv<span class="token punctuation">[</span><span class="token string">'home'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>期间还有一个小插曲，就是本地没问题，到服务端却报错了，Uncaught DOMException: Failed to execute 'appendChild' on 'Node': This node type does not support this method. at Object.appendChild 。经过查阅和调试之后，发现是 v-if 的问题，也就是在 PageInfo 和 Footer 组件中，如果你用了 v-if 去控制浏览量的显隐，因为在服务端是不会渲染的，而到了浏览器就报错了。所以把 v-if 修改成 v-show 就可以了。</p> <p>这么修改之后就基本就没问题了，看看最后的效果：
<img src="/azusaWebBlog/assets/img/1680680661617.2e6855fb.png">
这下终于大功告成了！虽然走了不少弯路，还修改了主题的源码，但最终的效果也实现了，还是很欣慰的。</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <p>还有一点就是百度统计的 access_token 有效期只有一个月，过期了需要用 refresh_token 去获取新的，在使用手册里面也有介绍方法。等过期了我看看啥情况再做一下自动更新吧。</p> <p>现在还没有开通评论，过俩天我再研究研究，等开通之后有什么问题就可以一起讨论了。</p> <h2 id="后续"><a href="#后续" class="header-anchor">#</a> 后续</h2> <p>因为接口只返回了top 20条数据，所以有些页面的访问量都展示不了，可能是我调用的方法有问题，并且挂了梯子有时候还调不了接口。想了想还是用 valine 的访问量统计，虽说上面官方说不启用，但我们可以在 config.js 中启用，方法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">themeConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">valineConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token string-property property">&quot;visitor&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>开启之后记得去源码的组件中注释掉百度统计的代码，恢复成原来的样子。</p> <p>合着白忙活一场了，不过也学到了很多东西，至少走完了一个流程。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2024/10/19 08:27:49</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#开通百度统计" class="sidebar-link reco-side-开通百度统计" data-v-b57cc07c>开通百度统计</a></li><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#配置代码" class="sidebar-link reco-side-配置代码" data-v-b57cc07c>配置代码</a></li><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#数据导出" class="sidebar-link reco-side-数据导出" data-v-b57cc07c>数据导出</a></li><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#展示浏览量" class="sidebar-link reco-side-展示浏览量" data-v-b57cc07c>展示浏览量</a></li><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#调试" class="sidebar-link reco-side-调试" data-v-b57cc07c>调试</a></li><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#其他" class="sidebar-link reco-side-其他" data-v-b57cc07c>其他</a></li><li class="level-2" data-v-b57cc07c><a href="/azusaWebBlog/frontEnd/%E4%B8%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E6%B5%8F%E8%A7%88%E9%87%8F%E6%95%99%E7%A8%8B.html#后续" class="sidebar-link reco-side-后续" data-v-b57cc07c>后续</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/azusaWebBlog/assets/js/app.f692878f.js" defer></script><script src="/azusaWebBlog/assets/js/3.4b10ef19.js" defer></script><script src="/azusaWebBlog/assets/js/1.be302be5.js" defer></script><script src="/azusaWebBlog/assets/js/7.6d3812aa.js" defer></script>
  </body>
</html>
