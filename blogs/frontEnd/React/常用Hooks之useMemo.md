---
title: å¸¸ç”¨Hooksä¹‹useMemo
date: 2023-12-04
tags:
 - å‰ç«¯
 - React
 - Hooks
categories: 
 - React
sidebar: 'auto'
---

# useMemo(calculateValue, dependencies)
å­¦è¿‡ Vue çš„åº”è¯¥èƒ½å¤Ÿå¾ˆå¿«ä¸Šæ‰‹è¿™ä¸ª Hookï¼Œå› ä¸ºä»–å’Œ Vue çš„ computedï¼ˆè®¡ç®—å±æ€§ï¼‰ä¹‹é—´ç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œå°±æ˜¯ç”¨æ¥ç¼“å­˜ç»è¿‡å¤æ‚è®¡ç®—çš„å€¼ã€‚

useMemo ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦ä¼ å…¥çš„å°±æ˜¯ä¸€ä¸ªè®¡ç®—å‡½æ•°ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–é¡¹ã€‚åˆ°è¿™é‡Œå¤§å®¶ä¹Ÿèƒ½æ˜æ˜¾æ„Ÿè§‰åˆ° React å’Œ Vue ä¹‹é—´é£æ ¼çš„ä¸åŒäº†ã€‚ä¸è¿‡ä¸å¾—ä¸è¯´ï¼ŒVue åœ¨ä¼˜åŒ–æ–¹é¢åšçš„å¾ˆå¥½ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å£°æ˜ä¾èµ–é¡¹ï¼Œä»–ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ”¶é›†ï¼Œè‡ªç„¶ä¹Ÿä¼šé¿å…äº†è®¸å¤šä¼šé‡åˆ°çš„é—®é¢˜ã€‚

é‚£ä¹ˆ React æ˜¯æ€ä¹ˆç¡®å®šä¾èµ–é¡¹æ˜¯å¦å˜åŒ–çš„å‘¢ï¼Ÿå…¶å®ä»–ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ Object.isï¼Œé™¤äº†åœ¨è¿™ä¸ª Hook ä¸­ï¼Œåœ¨ useEffect æˆ–è€…åœ¨ memo ä¸­åˆ¤æ–­ props æ˜¯å¦æœ‰å˜åŒ–ç­‰ï¼Œéƒ½æ˜¯ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•æ¥åˆ¤æ–­ï¼Œæ—¢ç„¶è¯´åˆ°è¿™é‡Œäº†ä¹Ÿé¡ºå¸¦è®²ä¸€ä¸‹ Object.isã€‚

Object.is() æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå‚æ•°æ˜¯å¦ç›¸ç­‰ã€‚å®ƒä¼šæ¯”è¾ƒä¸¤ä¸ªå€¼çš„ç±»å‹å’Œå€¼ï¼Œåªæœ‰å½“ä¸¤ä¸ªå€¼çš„ç±»å‹å’Œå€¼éƒ½ç›¸ç­‰æ—¶ï¼Œæ‰è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

åˆ«çœ‹ä»–å¾ˆç®€å•ï¼Œæœ‰æ—¶ä¹Ÿä¼šå¸¦æ¥ä½ æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œè‡³äºä¸ºä»€ä¹ˆæˆ‘ä»¬å¾…ä¼šå†è¯´~


## ç”¨æ³•
1. è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—
2. è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“
3. è®°å¿†å¦ä¸€ä¸ª Hook çš„ä¾èµ–
4. è®°å¿†ä¸€ä¸ªå‡½æ•°

### è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—
è¿™ä¸ªé€šè¿‡å­—é¢æ„æ€å°±å¾ˆå¥½ç†è§£ï¼Œå…¶å®å°±ç›¸å½“äºä½ ä¹‹å‰éƒ½éœ€è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯æœ‰äº† useMemoï¼Œä½ å°±å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™ useMemoï¼Œå†ç¡®å®šå¥½ä¾èµ–é¡¹ï¼Œå°±èƒ½å¤Ÿåœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨å‡½æ•°æ¥æ›´æ–°ï¼Œå¦åˆ™æ¯æ¬¡ä½¿ç”¨ä¸Šæ¬¡è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œå¯ä»¥è·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—ã€‚

æˆ‘ä»¬æ¥ä¸ªä¾‹å­ï¼Œä½ å°±èƒ½æ˜ç™½å®ƒçš„å¥½å¤„äº†ï¼Œé¦–å…ˆæ˜¯ä¸ä½¿ç”¨ useMemo çš„ï¼š
```js
function TestMemo(props) {
    const [keyword, setKeyword] = useState('')
    const [dialogVisible, setDialogVisible] = useState(false)

    const getShowList = () => {
        console.log('noUseMemo')
        if (!keyword) {
            return props.dataList
        }
        return props.dataList.filter(item => item.name.includes(keyword))
    }
    return (
        <>
            <input value={keyword} onInput={(e) => setKeyword(e.target.value)}></input>
            <div>
                {getShowList().map(item => <div key={item.id}>{item.name} <button onClick={() => setDialogVisible(true)}>æ“ä½œ</button></div>)}
            </div>
            {dialogVisible ? <div>dialog <button onClick={() => setDialogVisible(false)}>å…³é—­dialog</button></div> : null}
        </>
    )
}

function App() {
    const [list, setList] = useState([{id: 1, name: 'test1'}, {id: 2, name: 'test2'}, {id: 3, name: 'test3'}, {id: 4, name: 'test4'}])
    return (
        <>
            <TestMemo dataList={list}/>
        </>
    )
}
```
ä¸€ä¸ªå¾ˆå¸¸è§çš„è¡¨å•æ“ä½œæµç¨‹ï¼Œæ”¯æŒé€šè¿‡ keyword è¿‡æ»¤ï¼Œç„¶åæ¸²æŸ“å‡ºæ¥çš„æ¯ä¸€è¡Œéƒ½å¸¦æœ‰æ“ä½œæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥æ‰“å¼€å¯¹è¯æ¡†ã€‚

ç°åœ¨é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ useMemoï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå‡½æ•°å»è¿‡æ»¤ keywordï¼Œé‚£ä¹ˆå½“ç»„ä»¶è§¦å‘é‡æ–°æ¸²æŸ“æ—¶ï¼Œå³ä½¿ keyword æ²¡æœ‰ä¿®æ”¹ï¼Œä¹Ÿä¼šå»é‡æ–°è¿›è¡Œè¿‡æ»¤ã€‚æ¯”å¦‚å½“ä½ æ‰“å¼€æˆ–è€…å…³é—­å¯¹è¯æ¡†æ—¶ï¼ŒdialogVisible ä¸€ä¿®æ”¹ï¼Œæ•´ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¹Ÿå°±éœ€è¦é‡æ–°å»è¿‡æ»¤äº†ã€‚

å½“ç„¶ï¼Œå¹¶ä¸æ˜¯è¯´è¿™ä¹ˆåšæ˜¯é”™çš„ï¼Œè€Œæ˜¯å¯ä»¥æœ‰æ›´å¥½çš„åŠæ³•ï¼Œå¦‚æœè¯´ä½ ä¸ç”¨ useMemo åŠŸèƒ½å°±æ— æ³•å®ç°äº†ï¼Œé‚£åº”è¯¥æ˜¯æœ¬èº«è®¾è®¡æœ‰é—®é¢˜ï¼Œå®˜æ–¹ä¹Ÿè¯´äº† useMomo æ˜¯ä½œä¸ºä¸€ä¸ªä¼˜åŒ–çš„æ‰‹æ®µæ¥çš„ï¼Œè€Œä¸æ˜¯å¿…é¡»çš„ã€‚

é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ¥çœ‹ä½¿ç”¨äº† useMemo çš„æ•ˆæœå§ï¼š
```js
function TestMemo(props) {
    const [keyword, setKeyword] = useState('')
    const [dialogVisible, setDialogVisible] = useState(false)
    const showList = useMemo(() => { // è®°å¿†åŒ– å°†è®¡ç®—éƒ¨åˆ†ä¸¢è¿›æ¥
        console.log('useMemo')
        if (!keyword) {
            return props.dataList
        }
        return props.dataList.filter(item => item.name.includes(keyword))
    }, [keyword, props.dataList])

    return (
        <>
            <input value={keyword} onInput={(e) => setKeyword(e.target.value)}></input>
            <div>
                {showList.map(item => <div key={item.id}>{item.name} <button onClick={() => setDialogVisible(true)}>æ“ä½œ</button></div>)}
            </div>
            {dialogVisible ? <div>dialog <button onClick={() => setDialogVisible(false)}>å…³é—­dialog</button></div> : null}
        </>
    )
}
```
é€šè¿‡ useMemoï¼Œåªæœ‰åœ¨ä¾èµ–é¡¹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“åˆ—è¡¨ï¼Œå…¶ä»–æ— å…³çš„æ“ä½œéƒ½ä¸ä¼šå½±å“ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å³ä½¿æ‰“å¼€å’Œå…³é—­å¯¹è¯æ¡†ï¼Œéƒ½ä¸ä¼šé‡æ–°æ¸²æŸ“åˆ—è¡¨ã€‚åœ¨æ•°æ®é‡å°çš„æ—¶å€™å¯èƒ½æ•ˆæœä¸æ˜æ˜¾ï¼Œå¦‚æœæ•°æ®é‡å¤§åŠ ä¸Šè¿‡æ»¤è¿‡ç¨‹å¤æ‚ï¼Œé‚£ä¹ˆè¿™ä¸ªä¼˜åŒ–æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚


### è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“
å­¦ä¹ è¿™ä¸€ç‚¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š**é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact ä¼šé€’å½’åœ°é‡æ–°æ¸²æŸ“å®ƒçš„æ‰€æœ‰å­ç»„ä»¶ã€‚**

ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä¼ ç»™å­ç»„ä»¶çš„å‚æ•°æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œåªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œé‚£ä¹ˆå­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸€ç‚¹å¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œä¹Ÿæ˜¯å¯ä»¥ä¼˜åŒ–çš„ã€‚é€šå¸¸éœ€è¦æ­é…**memo**è¿™ä¸ª API æ¥å®ç°ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œå°±æ˜¯åŒ…è£…åœ¨è¿™ä¸ªæ–¹æ³•ä¸­çš„ç»„ä»¶ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œåªè¦è¯¥ç»„ä»¶çš„ props æ²¡æœ‰æ”¹å˜ï¼Œè¿™ä¸ªè®°å¿†åŒ–ç‰ˆæœ¬å°±ä¸ä¼šåœ¨å…¶çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶é‡æ–°æ¸²æŸ“ã€‚

é€šè¿‡è¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥å†æ¬¡å¯¹åˆ—è¡¨æ¸²æŸ“è¿›è¡Œä¼˜åŒ–ï¼š
```js
const TestMemo = memo(function TestMemo(props) {
    // ...
})
```
éå¸¸ç®€å•ï¼Œè¿™æ ·å­å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“è€Œ props æ²¡æœ‰å˜åŒ–æ—¶ï¼Œå­ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚
å®˜æ–¹ç»™çš„ä¾‹å­æ˜¯å°†ä¸€ä¸ª æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šå‘ç”Ÿæ”¹å˜çš„å€¼ ä½œä¸ºå‚æ•°ä¼ é€’ç»™å­ç»„ä»¶æ¥ä½œä¸ºä¾‹å­ï¼Œè¿™æ ·å­ï¼Œå³ä½¿ä½ å­ç»„ä»¶å¤–é¢åŒ…è£…äº† memoï¼Œä½†æ˜¯æ¯æ¬¡çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œprops éƒ½ä¼šæ”¹å˜ï¼Œé‚£ä¹ˆè¿™ä¸ªè®°å¿†åŒ–æ˜¯æ— æ•ˆçš„ã€‚

æ‰€ä»¥éœ€è¦ç»™ props ä½¿ç”¨ä¸Š useMemoï¼ˆå®˜æ–¹ç»™çš„ä¾‹å­ä¸­ï¼Œè¿™ä¸ª prop ä¹Ÿæ˜¯é€šè¿‡ä¸€ä¸ªå‡½æ•°è®¡ç®—å¾—åˆ°çš„ï¼‰ï¼Œ**é€šè¿‡ useMemo å’Œ memo çš„ç»„åˆï¼Œå°±èƒ½å¤Ÿè·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“**ï¼ˆå®˜æ–¹åº”è¯¥å°±æ˜¯æƒ³çªå‡ºè¿™ä¸€ç‚¹ï¼‰ã€‚

åˆ°è¿™é‡Œä½ å¯èƒ½ä¼šæƒ³åˆ°ï¼Œå‡½æ•°ç»„ä»¶ä¹Ÿç±»ä¼¼ä¸€ä¸ªè®¡ç®—å‡½æ•°ï¼Œå¹¶ä¸”è¿”å› jsxï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ useMemo å‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œç›´æ¥åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œå°†å­ç»„ä»¶çš„ JSX ä¸¢åˆ° useMemo ä¸­ï¼ŒåŒæ—¶å°†ä¼ å…¥çš„ props ä½œä¸ºä¾èµ–é¡¹ï¼š
```js
function App() {
    const [list, setList] = useState([{id: 1, name: 'test1'}, {id: 2, name: 'test2'}, {id: 3, name: 'test3'}, {id: 4, name: 'test4'}])
    const children = useMemo(() => <TestMemo dataList={list} />, [list])
    return (
        <>
            {/* <TestMemo dataList={list}/> */}
            {children}
        </>
    )
}
```

è¿™ä¸ªæ•ˆæœå’Œä¸Šé¢ä½¿ç”¨ memo åŒ…è£…å‡½æ•°ç»„ä»¶æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä½†æ‰‹åŠ¨å°† JSX èŠ‚ç‚¹åŒ…è£…åˆ° useMemo ä¸­å¹¶ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ä½ ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ä¸­è¿™æ ·åšã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé€šå¸¸ä¼šé€‰æ‹©ä½¿ç”¨ memo åŒ…è£…ç»„ä»¶è€Œä¸æ˜¯ä½¿ç”¨ useMemo åŒ…è£… JSX èŠ‚ç‚¹ã€‚

### è®°å¿†å¦ä¸€ä¸ª Hook çš„ä¾èµ–
è¿™ä¸ªç›´æ¥ç”¨å®˜æ–¹ç»™çš„ä¾‹å­å§ï¼Œæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å®¹æ˜“è¢«å¿½ç•¥ã€‚
```js
function Dropdown({ allItems, text }) {
  const searchOptions = { matchMode: 'whole-word', text };

  const visibleItems = useMemo(() => {
    return searchItems(allItems, searchOptions);
  }, [allItems, searchOptions]); // ğŸš© æé†’ï¼šä¾èµ–äºåœ¨ç»„ä»¶ä¸»ä½“ä¸­åˆ›å»ºçš„å¯¹è±¡
  // ...
}
```
ç›¸ä¿¡å¤§å®¶å¾ˆå¿«å°±å‘ç°äº†é—®é¢˜ï¼ŒsearchOptions åœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºå¯¹è±¡å­˜çš„å…¶å®æ˜¯å¼•ç”¨çš„åœ°å€ï¼Œå¯¹åº”åœ°å€å­˜çš„æ‰æ˜¯å…·ä½“çš„å†…å®¹ã€‚è¿˜è®°å¾—ä¸Šé¢è¯´çš„ Object.is ä¹ˆï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ¯æ¬¡åˆ¤æ–­çš„ç»“æœéƒ½æ˜¯ falseï¼Œé‚£ä¹ˆ visibleItems è¿™ä¸ªè®°å¿†åŒ–å°±æ˜¯æ— æ•ˆçš„ã€‚

é‚£ä¹ˆè§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸º searchOptions ä¾èµ–äº textï¼Œé‚£ä¹ˆæŠŠ searchOptions ä¹Ÿè®°å¿†åŒ–ä¹Ÿå°±è§£å†³é—®é¢˜äº†ã€‚

ä½†æ˜¯ä»”ç»†è§‚å¯Ÿåæˆ‘ä»¬å‘ç°ï¼Œå…¶å®å¯ä»¥æŠŠ searchOptions è¿™ä¸€éƒ¨åˆ†æ”¾åˆ° visibleItems ä¸­ï¼Œå°±ä¸ç”¨ä½¿ç”¨ä¸¤æ¬¡ useMemo äº†ï¼š
```js
function Dropdown({ allItems, text }) {
  const visibleItems = useMemo(() => {
    const searchOptions = { matchMode: 'whole-word', text };
    return searchItems(allItems, searchOptions);
  }, [allItems, text]); // âœ… åªæœ‰å½“ allItems æˆ–è€… text æ”¹å˜çš„æ—¶å€™æ‰ä¼šé‡æ–°è®¡ç®—
  // ...
}
```

### è®°å¿†ä¸€ä¸ªå‡½æ•°
å‡½æ•°å…¶å®æœ¬è´¨ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœå½“ä½ æƒ³æŠŠä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œä¹Ÿéœ€è¦ç”¨ useMemo è¿›è¡ŒåŒ…è£…ï¼Œå¦åˆ™æ¯æ¬¡åˆ›å»ºæ–°çš„å‡½æ•°å¯¼è‡´å­ç»„ä»¶è®°å¿†åŒ–å¤±æ•ˆï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š
```js
export default function Page({ productId, referrer }) {
  const handleSubmit = useMemo(() => {
    return (orderDetails) => {
      post('/product/' + productId + '/buy', {
        referrer,
        orderDetails
      });
    };
  }, [productId, referrer]);

  return <Form onSubmit={handleSubmit} />;
}
```
æŠŠæäº¤è¡¨å•çš„å‡½æ•°ä¼ é€’ç»™ Form ç»„ä»¶ï¼Œé€šè¿‡è®°å¿†åŒ–ï¼Œå¯ä»¥åœ¨ä¾èµ–é¡¹ä¸å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒForm ç»„ä»¶æ— éœ€é‡å¤æ¸²æŸ“ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒuseMemo ç¬¬ä¸€ä¸ªå‚æ•°çš„è¿”å›å€¼åº”è¯¥ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚

è¿™çœ‹èµ·æ¥å¾ˆç¬¨æ‹™ï¼è®°å¿†å‡½æ•°å¾ˆå¸¸è§ï¼ŒReact æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºæ­¤çš„å†…ç½® Hookã€‚å°†ä½ çš„å‡½æ•°åŒ…è£…åˆ° useCallback è€Œä¸æ˜¯ useMemo ä¸­ï¼Œä»¥é¿å…ç¼–å†™é¢å¤–çš„åµŒå¥—å‡½æ•°ï¼š
```js
export default function Page({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails
    });
  }, [productId, referrer]);

  return <Form onSubmit={handleSubmit} />;
}
```
å—¯å—¯ï¼Œçœ‹èµ·æ¥ç®€ä¾¿äº†è®¸å¤šã€‚ä»ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥çª¥è§ useCallback çš„å¤§è‡´ä½œç”¨ï¼Œå°±æ˜¯ç”¨æ¥è®°å¿†å‡½æ•°ï¼Œåƒæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æ›´åŠ ç®€ä¾¿ã€‚

æ­¤å¤–å†æä¸¤ä¸ªå®¹æ˜“å¿½ç•¥çš„ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¦‚æœä½¿ç”¨ useMemo æ²¡æœ‰å¡«å†™ç¬¬äºŒå‚æ•°çš„ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆåœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶éƒ½å°†è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°è¿›è¡Œé‡æ–°è®¡ç®—ï¼›ç¬¬äºŒä¸ªåˆ™æ˜¯åªèƒ½åœ¨ç»„ä»¶çš„é¡¶å±‚ æˆ–è€…è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å®ƒã€‚ä½ ä¸èƒ½åœ¨å¾ªç¯è¯­å¥æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœ‰éœ€è¦ï¼Œå°†å…¶æå–ä¸ºä¸€ä¸ªæ–°ç»„ä»¶å¹¶ä½¿ç”¨ stateã€‚è¿™ä¸¤ä¸ªæ¯”è¾ƒå¥½ç†è§£æˆ‘ä¹Ÿä¸å¤šè¯´äº†ï¼Œä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå†™ã€‚

å¥½äº†ï¼Œæœ¬æ¬¡ useMemo å°±å­¦ä¹ åˆ°è¿™é‡Œå•¦~æƒ³äº†è§£æ›´å¤šè¯·å‚è€ƒ[å®˜ç½‘](https://react.docschina.org/reference/react/useMemo)ã€‚